{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"F:\\\\codeGeek\\\\screens\\\\FindUsers.js\";\nimport React, { useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as Location from 'expo-location';\nimport axios from \"axios\";\nexport default function FindUsers() {\n  var _this = this;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  React.useEffect(function () {\n    loc();\n  }, []);\n\n  function loc() {\n    var _await$Location$reque, status, _loc, current_location, result;\n\n    return _regeneratorRuntime.async(function loc$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n          case 2:\n            _await$Location$reque = _context.sent;\n            status = _await$Location$reque.status;\n\n            if (!(status !== 'granted')) {\n              _context.next = 8;\n              break;\n            }\n\n            console.log('Permission to access location was denied');\n            _context.next = 17;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n          case 10:\n            _loc = _context.sent;\n            current_location = {\n              latitude: _loc.coords.latitude,\n              longitude: _loc.coords.longitude\n            };\n            _context.next = 14;\n            return _regeneratorRuntime.awrap(Location.reverseGeocodeAsync(current_location));\n\n          case 14:\n            result = _context.sent;\n            _context.next = 17;\n            return _regeneratorRuntime.awrap(axios.get(\"http://192.168.42.147:3006/api/nearby/\" + current_location.latitude + \"/\" + current_location.longitude + \"/\" + result[0].postalCode).then(function (res) {\n              setImage(res.data.ne[0].user.image);\n              setData(res.data.ne);\n              console.log(res.data.ne[0].user.image);\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, data && data.map(function (index) {\n    return React.createElement(Image, {\n      key: index._id,\n      source: index.user.image,\n      style: {\n        width: \"80%\",\n        margin: 10,\n        height: \"50%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 25\n      }\n    });\n  }));\n}\nvar styles = StyleSheet.create({});","map":{"version":3,"sources":["F:/codeGeek/screens/FindUsers.js"],"names":["React","useState","Location","axios","FindUsers","image","setImage","data","setData","useEffect","loc","requestPermissionsAsync","status","console","log","getCurrentPositionAsync","current_location","latitude","coords","longitude","reverseGeocodeAsync","result","get","postalCode","then","res","ne","user","catch","err","map","index","_id","width","margin","height","styles","StyleSheet","create"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,QAA6B,OAA7B;;;;;AAEA,OAAO,KAAKC,QAAZ,MAA0B,eAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,eAAe,SAASC,SAAT,GAAqB;AAAA;;AAAA,kBACNH,QAAQ,EADF;AAAA;AAAA,MACzBI,KADyB;AAAA,MAClBC,QADkB;;AAAA,mBAERL,QAAQ,CAAC,EAAD,CAFA;AAAA;AAAA,MAEzBM,IAFyB;AAAA,MAEnBC,OAFmB;;AAGhCR,EAAAA,KAAK,CAACS,SAAN,CAAgB,YAAM;AAClBC,IAAAA,GAAG;AACN,GAFD,EAEG,EAFH;;AAGA,WAAeA,GAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAC2BR,QAAQ,CAACS,uBAAT,EAD3B;;AAAA;AAAA;AACUC,YAAAA,MADV,yBACUA,MADV;;AAAA,kBAEQA,MAAM,KAAK,SAFnB;AAAA;AAAA;AAAA;;AAIQC,YAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AAJR;AAAA;;AAAA;AAAA;AAAA,6CAO0BZ,QAAQ,CAACa,uBAAT,EAP1B;;AAAA;AAOcL,YAAAA,IAPd;AASYM,YAAAA,gBATZ,GAS+B;AAGnBC,cAAAA,QAAQ,EAAEP,IAAG,CAACQ,MAAJ,CAAWD,QAHF;AAInBE,cAAAA,SAAS,EAAET,IAAG,CAACQ,MAAJ,CAAWC;AAJH,aAT/B;AAAA;AAAA,6CAe2BjB,QAAQ,CAACkB,mBAAT,CAA6BJ,gBAA7B,CAf3B;;AAAA;AAeYK,YAAAA,MAfZ;AAAA;AAAA,6CAgBclB,KAAK,CAACmB,GAAN,4CAAmDN,gBAAgB,CAACC,QAApE,SAAgFD,gBAAgB,CAACG,SAAjG,SAA8GE,MAAM,CAAC,CAAD,CAAN,CAAUE,UAAxH,EAAsIC,IAAtI,CAA2I,UAACC,GAAD,EAAS;AACtJnB,cAAAA,QAAQ,CAACmB,GAAG,CAAClB,IAAJ,CAASmB,EAAT,CAAY,CAAZ,EAAeC,IAAf,CAAoBtB,KAArB,CAAR;AACAG,cAAAA,OAAO,CAACiB,GAAG,CAAClB,IAAJ,CAASmB,EAAV,CAAP;AACAb,cAAAA,OAAO,CAACC,GAAR,CAAYW,GAAG,CAAClB,IAAJ,CAASmB,EAAT,CAAY,CAAZ,EAAeC,IAAf,CAAoBtB,KAAhC;AACH,aAJK,EAIHuB,KAJG,CAIG,UAACC,GAAD,EAAS;AACdhB,cAAAA,OAAO,CAACC,GAAR,CAAYe,GAAZ;AACH,aANK,CAhBd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0BA,SACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKtB,IAAI,IAEGA,IAAI,CAACuB,GAAL,CAAS,UAACC,KAAD;AAAA,WACL,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAEA,KAAK,CAACC,GAAlB;AAAuB,MAAA,MAAM,EAAED,KAAK,CAACJ,IAAN,CAAWtB,KAA1C;AAAiD,MAAA,KAAK,EAAE;AAAE4B,QAAAA,KAAK,EAAE,KAAT;AAAeC,QAAAA,MAAM,EAAC,EAAtB;AAA0BC,QAAAA,MAAM,EAAE;AAAlC,OAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK;AAAA,GAAT,CAHZ,CADJ;AAaH;AAED,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB,EAAlB,CAAf","sourcesContent":["import React,{useState} from 'react'\r\nimport { StyleSheet, Text, View,Image } from 'react-native'\r\nimport * as Location from 'expo-location';\r\nimport axios from \"axios\";\r\nexport default function FindUsers() {\r\n    const [image, setImage] = useState();\r\n    const [data, setData] = useState([])\r\n    React.useEffect(() => {\r\n        loc();\r\n    }, [])\r\n    async function loc() {\r\n        let { status } = await Location.requestPermissionsAsync()\r\n        if (status !== 'granted') {\r\n          \r\n            console.log('Permission to access location was denied');\r\n        \r\n        } else {\r\n            const loc = await Location.getCurrentPositionAsync();\r\n\r\n            var current_location = {\r\n                // latitude: 12.899929,\r\n                // longitude:77.510606\r\n                latitude: loc.coords.latitude,\r\n                longitude: loc.coords.longitude\r\n            }\r\n            let result = await Location.reverseGeocodeAsync(current_location);\r\n            await axios.get(`http://192.168.42.147:3006/api/nearby/${current_location.latitude}/${current_location.longitude}/${result[0].postalCode}`).then((res) => {\r\n                setImage(res.data.ne[0].user.image)\r\n                setData(res.data.ne);\r\n                console.log(res.data.ne[0].user.image)\r\n            }).catch((err) => {\r\n                console.log(err)\r\n            })\r\n         \r\n        }\r\n    }\r\n    return (\r\n        <View>\r\n            {data && (\r\n                \r\n                    data.map((index) => (\r\n                        <Image key={index._id} source={index.user.image} style={{ width: \"80%\",margin:10, height: \"50%\" }}></Image>\r\n                    ))\r\n                \r\n                \r\n               )\r\n}\r\n        </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({})\r\n"]},"metadata":{},"sourceType":"module"}