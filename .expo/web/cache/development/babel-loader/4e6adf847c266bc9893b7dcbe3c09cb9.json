{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\codeGeek\\\\screens\\\\Home.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { Camera } from 'expo-camera';\nimport * as Location from 'expo-location';\nimport { Entypo } from '@expo/vector-icons';\nimport { Ionicons } from '@expo/vector-icons';\nimport { GlobalContext } from \"../context/globalState\";\n\nvar Home = function Home(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _React$useContext = React.useContext(GlobalContext),\n      user = _React$useContext.user;\n\n  console.log(user);\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mood = _useState4[0],\n      setMood = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      reason = _useState6[0],\n      setReason = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      intrest = _useState8[0],\n      setIntrest = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      location = _useState10[0],\n      setLocation = _useState10[1];\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      address = _React$useState2[0],\n      setAddress = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      modalVisible = _React$useState4[0],\n      setModalVisible = _React$useState4[1];\n\n  var windowHeight = useWindowDimensions().height;\n  React.useEffect(function () {\n    loc();\n\n    if (route.params != undefined) {\n      var ll = route.params.image;\n      setImage(ll);\n    }\n  }, [route.params]);\n\n  function loc() {\n    var _await$Location$reque, status, _loc, current_location, result;\n\n    return _regeneratorRuntime.async(function loc$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n          case 2:\n            _await$Location$reque = _context.sent;\n            status = _await$Location$reque.status;\n\n            if (!(status !== 'granted')) {\n              _context.next = 8;\n              break;\n            }\n\n            console.log('Permission to access location was denied');\n            _context.next = 18;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n          case 10:\n            _loc = _context.sent;\n            setLocation(_loc);\n            current_location = {\n              latitude: _loc.coords.latitude,\n              longitude: _loc.coords.longitude\n            };\n            _context.next = 15;\n            return _regeneratorRuntime.awrap(Location.reverseGeocodeAsync(current_location));\n\n          case 15:\n            result = _context.sent;\n            setAddress(result[0]);\n            console.log(address);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var rl = React.useRef();\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      hasPermission = _useState12[0],\n      setHasPermission = _useState12[1];\n\n  var _useState13 = useState(Camera.Constants.Type.back),\n      _useState14 = _slicedToArray(_useState13, 2),\n      type = _useState14[0],\n      setType = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      hasCamera = _useState16[0],\n      setHas = _useState16[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n            case 2:\n              _await$Camera$request = _context2.sent;\n              status = _await$Camera$request.status;\n              setHasPermission(status === 'granted');\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  if (hasPermission === null) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (hasPermission === false) {\n    return React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 12\n      }\n    }, \"No access to camera\");\n  }\n\n  function submit() {\n    var data;\n    return _regeneratorRuntime.async(function submit$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            data = {\n              mood: mood,\n              reason: reason,\n              intrest: intrest,\n              image: image,\n              address: address,\n              location: {\n                latitude: location.coords.latitude,\n                longitude: location.coords.longitude\n              }\n            };\n            console.log(data);\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(axios.post(\"http://192.168.42.147:3006/api/upload\", data).then(function (res) {\n              console.log(res.data);\n            }).catch(function (err) {\n              return console.log(err);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(KeyboardAvoidingView, {\n    keyboardVerticalOffset: 500,\n    style: {\n      flex: 1\n    },\n    behavior: \"padding\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, React.createElement(SafeAreaView, {\n    style: [{\n      minHeight: Math.round(windowHeight)\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 1\n    }\n  }, React.createElement(Modal, {\n    style: [{\n      minHeight: Math.round(windowHeight)\n    }],\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    onRequestClose: function onRequestClose() {\n      Alert.alert('Modal has been closed.');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    onPress: function onPress() {\n      setModalVisible(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \"close\"), image == null ? React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      setModalVisible(false);\n      navigation.navigate(\"Camera\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, React.createElement(Entypo, {\n    name: \"camera\",\n    size: 54,\n    color: \"black\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  })) : React.createElement(Image, {\n    source: image,\n    style: {\n      width: 100,\n      height: 100\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }), React.createElement(TextInput, {\n    style: {\n      width: 200,\n      borderColor: \"black\",\n      marginTop: 20,\n      borderBottomWidth: 1\n    },\n    placeholder: \"About your current mood\",\n    onChangeText: function onChangeText(text) {\n      return setMood(text);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }), React.createElement(TextInput, {\n    style: {\n      width: 200,\n      borderColor: \"black\",\n      marginTop: 20,\n      borderBottomWidth: 1\n    },\n    placeholder: \"Why are you here?\",\n    onChangeText: function onChangeText(text) {\n      return setReason(text);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }), React.createElement(TextInput, {\n    style: {\n      width: 200,\n      borderColor: \"black\",\n      marginTop: 20,\n      borderBottomWidth: 1\n    },\n    placeholder: \"Intrests\",\n    onChangeText: function onChangeText(text) {\n      return setIntrest(text);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }), address && React.createElement(TextInput, {\n    style: {\n      width: 200,\n      borderColor: \"black\",\n      marginTop: 20,\n      borderBottomWidth: 1\n    },\n    value: address.city,\n    placeholder: \"Location\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }), React.createElement(Button, {\n    style: {\n      marginTop: \"10%\"\n    },\n    title: \"click me\",\n    onPress: function onPress() {\n      return submit();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  })))), React.createElement(TouchableHighlight, {\n    onPress: function onPress() {\n      setModalVisible(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 6\n    }\n  }, \"Open\")), React.createElement(TextInput, {\n    style: {\n      width: 200,\n      borderColor: \"black\",\n      marginTop: 20,\n      borderBottomWidth: 1\n    },\n    placeholder: \"About your current mood\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Home;\nvar styles = StyleSheet.create({\n  centeredView: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 22\n  },\n  modalView: {\n    margin: 20,\n    width: \"80%\",\n    height: \"80%\",\n    backgroundColor: 'white',\n    borderRadius: 20,\n    padding: 5,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  openButton: {\n    backgroundColor: '#F194FF',\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  textStyle: {\n    color: 'white',\n    fontWeight: 'bold',\n    textAlign: 'center'\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: 'center'\n  }\n});","map":{"version":3,"sources":["F:/codeGeek/screens/Home.js"],"names":["React","useState","useEffect","axios","Camera","Location","Entypo","Ionicons","GlobalContext","Home","route","navigation","image","setImage","useContext","user","console","log","mood","setMood","reason","setReason","intrest","setIntrest","location","setLocation","address","setAddress","modalVisible","setModalVisible","windowHeight","useWindowDimensions","height","loc","params","undefined","ll","requestPermissionsAsync","status","getCurrentPositionAsync","current_location","latitude","coords","longitude","reverseGeocodeAsync","result","rl","useRef","hasPermission","setHasPermission","Constants","Type","back","type","setType","hasCamera","setHas","submit","data","post","then","res","catch","err","flex","minHeight","Math","round","Alert","alert","styles","centeredView","modalView","navigate","width","borderColor","marginTop","borderBottomWidth","text","city","StyleSheet","create","justifyContent","alignItems","margin","backgroundColor","borderRadius","padding","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","openButton","textStyle","color","fontWeight","textAlign","modalText","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n//import { StyleSheet, Text,Modal, View,TouchableOpacity } from 'react-native'\r\nimport axios from \"axios\";\r\nimport { Alert, Modal, StyleSheet, TouchableOpacity,Image,SafeAreaView, TextInput,Platform,useWindowDimensions, Text, TouchableHighlight,ScrollView, View, Button,KeyboardAvoidingView } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\nimport * as Location from 'expo-location';\r\nimport { Entypo } from '@expo/vector-icons';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport {GlobalContext} from \"../context/globalState\"\r\nconst Home = ({ route, navigation }) => {\r\n  const [image, setImage] = useState(null);\r\n  const { user } = React.useContext(GlobalContext);\r\n  console.log(user)\r\n  const [mood, setMood] = useState();\r\n  const [reason, setReason] = useState();\r\n  const [intrest, setIntrest] = useState();\r\n  const [location, setLocation] = useState();\r\n  const [address, setAddress] = React.useState({});\r\n  const [modalVisible, setModalVisible] = React.useState(false);\r\n  const windowHeight = useWindowDimensions().height;\r\n  React.useEffect(() => {\r\n    loc()\r\n    if (route.params != undefined) {\r\n    //  console.log(route.params.image)\r\n      const ll = route.params.image;\r\n      setImage(ll)\r\n    }\r\n\r\n   \r\n  }, [route.params]);\r\n  async function loc() {\r\n    let { status } = await Location.requestPermissionsAsync()\r\n    if (status !== 'granted') {\r\n      \r\n      console.log('Permission to access location was denied');\r\n    \r\n    } else {\r\n      const loc = await Location.getCurrentPositionAsync();\r\n      setLocation(loc)\r\n      var current_location = {\r\n        // latitude: 12.899929,\r\n        // longitude:77.510606\r\n        latitude: loc.coords.latitude,\r\n        longitude: loc.coords.longitude\r\n      }\r\n      let result = await Location.reverseGeocodeAsync(current_location);\r\n      \r\n      setAddress(\r\n        result[0]\r\n      )\r\n      console.log(address)\r\n     \r\n    }\r\n  }\r\n  const rl = React.useRef();\r\n  const [hasPermission, setHasPermission] = useState(null);\r\n  const [type, setType] = useState(Camera.Constants.Type.back);\r\n  // const [image, setImage] = useState();\r\n  const [hasCamera, setHas] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await Camera.requestPermissionsAsync();\r\n      setHasPermission(status === 'granted');\r\n    })();\r\n  }, []);\r\n\r\n  if (hasPermission === null) {\r\n    return <View />;\r\n  }\r\n  if (hasPermission === false) {\r\n    return <Text>No access to camera</Text>;\r\n  }\r\n \r\n  async function submit() {\r\n    const data = {\r\n      mood: mood,\r\n      reason: reason,\r\n      intrest: intrest,\r\n      image:image,\r\n      address: address,\r\n      location: {\r\n        latitude: location.coords.latitude,\r\n        longitude: location.coords.longitude\r\n      }\r\n    }\r\n    console.log(data)\r\n    await axios.post(\"http://192.168.42.147:3006/api/upload\", data).then((res) => {\r\n      console.log(res.data)\r\n    }).catch((err)=>console.log(err))\r\n  }\r\n  return (\r\n    <KeyboardAvoidingView\r\n          keyboardVerticalOffset = {500} // adjust the value here if you need more padding\r\n        style = {{ flex: 1 }}\r\n      behavior=\"padding\" >\r\n      <SafeAreaView style={[{ minHeight: Math.round(windowHeight) }]}>\r\n<View>\r\n     \r\n        <Modal\r\n        style={[{ minHeight: Math.round(windowHeight) }]}\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={modalVisible}\r\n        onRequestClose={() => {\r\n          Alert.alert('Modal has been closed.');\r\n        }}>\r\n        <View style={styles.centeredView}>\r\n          <View style={styles.modalView}>\r\n                       \r\n            <Text  onPress={() => {\r\n          setModalVisible(false);\r\n                }}>close</Text>\r\n                {image == null ?\r\n                  <TouchableOpacity onPress={() => {\r\n                    setModalVisible(false)\r\n                    navigation.navigate(\"Camera\")\r\n          \r\n                  }}>\r\n                    <Entypo name=\"camera\" size={54} color=\"black\" />\r\n                  </TouchableOpacity> :\r\n                  <Image source={image} style={{ width: 100, height: 100 }}></Image>}\r\n                \r\n                <TextInput\r\n                  style={{ width: 200, borderColor: \"black\", marginTop: 20, borderBottomWidth: 1 }}\r\n                  placeholder=\"About your current mood\"\r\n                onChangeText={text=>setMood(text)}\r\n                />\r\n                \r\n                <TextInput\r\n                  style={{ width: 200, borderColor: \"black\", marginTop: 20, borderBottomWidth: 1 }}\r\n                  placeholder=\"Why are you here?\"\r\n                  onChangeText={text=>setReason(text)}/>\r\n                <TextInput\r\n                  style={{ width: 200, borderColor: \"black\", marginTop: 20, borderBottomWidth: 1 }}\r\n                  placeholder=\"Intrests\"\r\n                  onChangeText={text=>setIntrest(text)}/>\r\n                {address && (\r\n                  <TextInput style={{ width: 200, borderColor: \"black\", marginTop: 20, borderBottomWidth: 1 }}\r\n                    value={address.city}\r\n                    placeholder=\"Location\" />)}\r\n                <Button\r\n                  style={{marginTop:\"10%\"}}\r\n                  title=\"click me\" onPress={()=>submit()}/>\r\n                        \r\n          </View>\r\n        </View>\r\n      </Modal>\r\n    \r\n      \r\n      {/* <Text>\r\n        \r\n      </Text> */}\r\n\r\n     \r\n     \r\n          <TouchableHighlight\r\n     \r\n     onPress={() => {\r\n       setModalVisible(true);\r\n     }}>\r\n     <Text>\r\n       Open\r\n       </Text>\r\n          </TouchableHighlight>\r\n          <TextInput style={{width:200,borderColor:\"black\",marginTop:20,borderBottomWidth:1}} placeholder=\"About your current mood\" />\r\n        </View>\r\n     \r\n     \r\n      </SafeAreaView>\r\n      </KeyboardAvoidingView>\r\n\r\n    )\r\n}\r\n\r\nexport default Home\r\n\r\nconst styles = StyleSheet.create({centeredView: {\r\n    flex: 1,\r\n\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginTop: 22,\r\n  },\r\n  modalView: {\r\n      margin: 20,\r\n      width: \"80%\",\r\n      height:\"80%\",\r\n    backgroundColor: 'white',\r\n    borderRadius: 20,\r\n    padding: 5,\r\n    alignItems: 'center',\r\n    shadowColor: '#000',\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n    elevation: 5,\r\n  },\r\n  openButton: {\r\n    backgroundColor: '#F194FF',\r\n    borderRadius: 20,\r\n    padding: 10,\r\n    elevation: 2,\r\n  },\r\n  textStyle: {\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n  modalText: {\r\n    marginBottom: 15,\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\n"]},"metadata":{},"sourceType":"module"}